(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{29:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(18),i=n.n(s),r=n(8),o=(n(29),n(22)),l=n(2),u=n(3),d=c.a.createContext(),p=n.p+"static/media/logo-white.ff5e7d02.svg",j=n(0);var _=function(e){var t=c.a.useState(!1),n=Object(l.a)(t,2),a=n[0],s=n[1];return Object(j.jsx)("header",{className:a?"header header_burger-opened":"header",children:Object(j.jsxs)("div",{className:"header__container",children:[Object(j.jsx)("img",{src:p,alt:"\u041b\u043e\u0433\u043e",className:"logo header__logo"}),Object(j.jsx)("div",{className:"header__btn",onClick:function(){s(!a)},children:Object(j.jsx)("span",{className:a?"header__burger header__burger_active":"header__burger"})}),Object(j.jsxs)("div",{className:"header__info",children:[Object(j.jsx)("p",{className:"header__info-email",children:e.email}),Object(j.jsx)(r.b,{to:e.headerLinkUrl,className:"header__info-link button",onClick:e.onClick,children:e.btnText})]})]})})};var h=function(e){var t=c.a.useContext(d),n=e.card.owner===t._id||e.card.owner._id===t._id,a=e.card.likes.some((function(e){return e===t._id})),s=0!==e.card.likes.length,i="card__trash button ".concat(n?"card__trash_visible":"card__trash_hidden"),r="card__like button ".concat(a?"card__like_active":"card__like_hidden"),o="card__like-quantity ".concat(s?"card__like-quantity_visible":"card__like-quantity_hidden");return Object(j.jsxs)("article",{className:"card",children:[Object(j.jsx)("button",{type:"button",className:i,onClick:function(t){e.checkCardDelete(t.target.id),e.onCardDeleteClick()},id:e.id}),Object(j.jsx)("div",{className:"card__img",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)}}),Object(j.jsxs)("div",{className:"card__row",children:[Object(j.jsx)("h3",{className:"card__title",children:e.card.name}),Object(j.jsxs)("div",{className:"card__like-items",children:[Object(j.jsx)("button",{type:"button",className:r,onClick:function(){e.onCardLike(e.card)}}),Object(j.jsx)("p",{className:o,children:e.card.likes.length})]})]})]})};var f=function(e){c.a.useEffect((function(){e.onInit("\u0412\u044b\u0439\u0442\u0438","/signin")}),[e]);var t=c.a.useContext(d);return Object(j.jsxs)("main",{className:"content",children:[Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsxs)("div",{className:"profile__avatar-container",onClick:e.onEditAvatar,children:[Object(j.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(t.avatar,")")}}),Object(j.jsx)("div",{className:"profile__avatar-bg"})]}),Object(j.jsxs)("div",{className:"profile__info",children:[Object(j.jsxs)("div",{className:"profile__info-row",children:[Object(j.jsx)("h1",{className:"profile__title",children:t.name}),Object(j.jsx)("button",{type:"button",className:"profile__edit-button button",onClick:e.onEditProfile})]}),Object(j.jsx)("p",{className:"profile__subtitle",children:t.about})]}),Object(j.jsx)("button",{type:"button",className:"profile__add-button button",onClick:e.onAddPlace})]}),Object(j.jsx)("section",{className:"elements",children:e.cards.map((function(t){return Object(j.jsx)(h,{id:t._id,card:t,onCardClick:e.handleCardClick,onCardLike:e.onCardLike,checkCardDelete:e.checkCardDelete,onCardDeleteClick:e.onCardDeleteClick},t._id)}))})]})};var b=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia Udmurtia"})})};var m=function(e){return Object(j.jsx)("section",{className:"root__popup popup-image popup popup_theme_dark ".concat(e.card?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup-image__container",children:[Object(j.jsx)("button",{type:"button",className:"popup-image__button-cross popup__button-cross button",onClick:e.onClose}),Object(j.jsx)("img",{src:"".concat(e.card.link),alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:"popup-image__img"}),Object(j.jsx)("h3",{className:"popup-image__title",children:e.card.name})]})})},g=n(20),O=n(21),x=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(g.a)(this,e),this._baseUrl=n,this._headers=a}return Object(O.a)(e,[{key:"_handleOriginalResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e))}},{key:"getCardList",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",credentials:"include",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",credentials:"include",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleOriginalResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",credentials:"include",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleOriginalResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",credentials:"include",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"changeLikeCardStatus",value:function(e,t){var n="DELETE";return t&&(n="PUT"),fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:n,credentials:"include",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",credentials:"include",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleOriginalResponse)}}]),e}())({baseUrl:"http://localhost:3001",headers:{"Content-Type":"application/json"}});var v=function(e){var t=c.a.useRef(),n="";return n=e.isDeletingCard?e.isLoading?"\u0414\u0430...":"\u0414\u0430":e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",Object(j.jsx)("section",{className:"popup root__popup ".concat(e.isOpen?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{type:"button",className:"popup__button-cross button",onClick:e.onClose}),Object(j.jsx)("h3",{className:"popup__title",children:e.title}),Object(j.jsxs)("form",{action:"#",name:"popup".concat(e.classDescription,"Form"),className:"popup__form",onSubmit:function(n){e.onSubmit(n),t.current.reset()},ref:t,children:[e.children,Object(j.jsx)("button",{type:"submit",disabled:!e.isFormValid,className:"".concat(e.isFormValid?"popup__btn-add":"popup__btn-add popup__btn-add_invalid"),children:n})]})]})})};var C=function(e){var t=c.a.useState(""),n=Object(l.a)(t,2),a=n[0],s=n[1],i=c.a.useState(""),r=Object(l.a)(i,2),o=r[0],u=r[1],p=c.a.useState(""),_=Object(l.a)(p,2),h=_[0],f=_[1],b=c.a.useState(""),m=Object(l.a)(b,2),g=m[0],O=m[1],x=c.a.useState(!0),C=Object(l.a)(x,2),N=C[0],k=C[1],y=c.a.useRef(),S=c.a.useRef(),L=c.a.useContext(d);function E(){y.current.validity.valid&&S.current.validity.valid?k(!0):k(!1)}return c.a.useEffect((function(){s(L.name||""),u(L.about||""),O(""),f(""),E()}),[L,e.isOpen]),Object(j.jsx)(v,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:a,about:o})},isLoading:e.isLoading,isFormValid:N,children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",name:"popupInputName",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0438\u043c\u044f",className:"popup-profile__text popup__text popup-profile__text_type_name popup__input",id:"profile-name",required:!0,minLength:"2",maxLength:"40",onChange:function(e){s(e.target.value),f(y.current.validationMessage),E()},ref:y,value:a}),Object(j.jsx)("span",{id:"$profile-name-error",className:"popup__text-error",children:h}),Object(j.jsx)("input",{type:"text",name:"popupInputJob",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0443 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044e",className:"popup-profile__text popup__text popup-profile__text_type_profession popup__input",id:"profile-job",required:!0,minLength:"2",maxLength:"200",onChange:function(e){u(e.target.value),O(S.current.validationMessage),E()},ref:S,value:o}),Object(j.jsx)("span",{id:"profile-job-error",className:"popup__text-error",children:g})]})})};var N=function(e){var t=c.a.useContext(d),n=c.a.useState(""),a=Object(l.a)(n,2),s=a[0],i=a[1],r=c.a.useState(!0),o=Object(l.a)(r,2),u=o[0],p=o[1],_=c.a.useRef();function h(){_.current.validity.valid?p(!0):p(!1)}return c.a.useEffect((function(){_.current.value=t.avatar||"",i(""),h()}),[t,e.isOpen]),Object(j.jsx)(v,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:_.current.value})},isLoading:e.isLoading,isFormValid:u,children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"url",name:"avatarInputLink",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup-avatar__text popup__text popup-avatar__text_type_link popup__input",id:"avatar-link",required:!0,onChange:function(){i(_.current.validationMessage),h()},ref:_}),Object(j.jsx)("span",{id:"avatar-link-error",className:"popup__text-error",children:s})]})})};var k=function(e){var t=c.a.useState(""),n=Object(l.a)(t,2),a=n[0],s=n[1],i=c.a.useState(""),r=Object(l.a)(i,2),o=r[0],u=r[1],d=c.a.useState(!1),p=Object(l.a)(d,2),_=p[0],h=p[1],f=c.a.useRef(),b=c.a.useRef();function m(){f.current.validity.valid&&b.current.validity.valid?h(!0):h(!1)}return c.a.useEffect((function(){f.current.value="",b.current.value="",s(""),u(""),m()}),[e.isOpen]),Object(j.jsx)(v,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:f.current.value,link:b.current.value})},isLoading:e.isLoading,isFormValid:_,children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",name:"popupInputPlace",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup-card__text popup__text popup-card__text_type_place popup__input",id:"card-place",required:!0,minLength:"2",maxLength:"30",onChange:function(){s(f.current.validationMessage),m()},ref:f}),Object(j.jsx)("span",{id:"card-place-error",className:"popup__text-error",children:a}),Object(j.jsx)("input",{type:"url",name:"popupInputLink",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup-card__text popup__text popup-card__text_type_link popup__input",id:"card-link",required:!0,onChange:function(){u(b.current.validationMessage),m()},ref:b}),Object(j.jsx)("span",{id:"card-link-error",className:"popup__text-error",children:o})]})})};var y=function(e){return Object(j.jsx)(v,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onDeleteCard()},isLoading:e.isLoading,isDeletingCard:e.isDeletingCard,isFormValid:!0,children:Object(j.jsx)(j.Fragment,{})})};function S(e){c.a.useEffect((function(){e.onInit("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","/signup")}),[e]);var t=c.a.useState(""),n=Object(l.a)(t,2),a=n[0],s=n[1],i=c.a.useState(""),r=Object(l.a)(i,2),o=r[0],u=r[1],d=c.a.useRef(),p=c.a.useRef();return Object(j.jsx)("div",{className:"login form-page",children:Object(j.jsxs)("div",{className:"form-page__container",children:[Object(j.jsx)("h3",{className:"login__title form-page__title",children:"\u0412\u0445\u043e\u0434"}),Object(j.jsxs)("form",{action:"#",name:"loginForm",className:"login__form form-page__form",onSubmit:function(t){t.preventDefault(),d.current.value&&p.current.value&&e.onLogin({email:d.current.value,password:p.current.value})},children:[Object(j.jsx)("input",{type:"email",name:"loginInputEmail",placeholder:"Email",className:"login__form-input form-page__input",id:"login-email",required:!0,onChange:function(){s(d.current.validationMessage)},ref:d}),Object(j.jsx)("span",{id:"login-email-error",className:"form-page__text-error",children:a}),Object(j.jsx)("input",{type:"password",name:"loginInputPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"login__form-input form-page__input",id:"login-password",required:!0,onChange:function(){u(p.current.validationMessage)},ref:p}),Object(j.jsx)("span",{id:"login-password-error",className:"form-page__text-error",children:o}),Object(j.jsx)("button",{type:"submit",className:"login__form-btn form-page__btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}function L(e){c.a.useEffect((function(){e.onInit("\u0412\u043e\u0439\u0442\u0438","/signin")}),[e]);var t=c.a.useState(""),n=Object(l.a)(t,2),a=n[0],s=n[1],i=c.a.useState(""),o=Object(l.a)(i,2),u=o[0],d=o[1],p=c.a.useRef(),_=c.a.useRef();return Object(j.jsx)("div",{className:"regist form-page",children:Object(j.jsxs)("div",{className:"form-page__container",children:[Object(j.jsx)("h3",{className:"regist__title form-page__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsxs)("form",{action:"#",name:"registForm",className:"regist__form form-page__form",onSubmit:function(t){t.preventDefault(),p.current.value&&_.current.value&&e.onRegister({email:p.current.value,password:_.current.value})},children:[Object(j.jsx)("input",{type:"email",name:"registInputEmail",placeholder:"Email",className:"regist__form-input form-page__input",id:"regist-email",required:!0,onChange:function(){s(p.current.validationMessage)},ref:p}),Object(j.jsx)("span",{id:"regist-email-error",className:"form-page__text-error",children:a}),Object(j.jsx)("input",{type:"password",name:"registInputPassword",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"regist__form-input form-page__input",id:"regist-password",required:!0,onChange:function(){d(_.current.validationMessage)},ref:_}),Object(j.jsx)("span",{id:"regist-password-error",className:"form-page__text-error",children:u}),Object(j.jsx)("button",{type:"submit",className:"regist__form-btn form-page__btn",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(j.jsx)(r.b,{to:"/signin",className:"button form-page__btn-enter",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})]})})}var E=n(23),w=n(24),I=function(e){var t=e.component,n=Object(w.a)(e,["component"]);return Object(j.jsx)(u.b,{children:function(){return n.loggedIn?Object(j.jsx)(t,Object(E.a)({},n)):Object(j.jsx)(u.a,{to:"./signin"})}})},U=n.p+"static/media/regist-success.a9eb6caf.svg",D=n.p+"static/media/regist-error.d4ce2a26.svg";var R=function(e){return Object(j.jsx)("section",{className:"popup root__popup ".concat(e.isOpen?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{type:"button",className:"popup__button-cross button",onClick:e.onClose}),Object(j.jsx)("img",{src:e.isAuthSuccess?U:D,alt:e.isAuthSuccess?"\u0423\u0441\u043f\u0435\u0448\u043d\u043e":"\u041e\u0448\u0438\u0431\u043a\u0430",className:"popup__img"}),Object(j.jsx)("h3",{className:"popup__title popup__title_cener",children:e.isAuthSuccess?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})},P="http://localhost:3001",T=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))};var F=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],i=c.a.useState(!1),r=Object(l.a)(i,2),p=r[0],h=r[1],g=c.a.useState(!1),O=Object(l.a)(g,2),v=O[0],E=O[1],w=c.a.useState(!1),U=Object(l.a)(w,2),D=U[0],F=U[1],A=c.a.useState(!1),q=Object(l.a)(A,2),M=q[0],J=q[1],V=c.a.useState(!0),B=Object(l.a)(V,2),G=B[0],H=B[1],$=c.a.useState(""),z=Object(l.a)($,2),K=z[0],Q=z[1],W=c.a.useState(""),X=Object(l.a)(W,2),Y=X[0],Z=X[1],ee=c.a.useState(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=c.a.useState(!1),se=Object(l.a)(ce,2),ie=se[0],re=se[1],oe=c.a.useState({}),le=Object(l.a)(oe,2),ue=le[0],de=le[1],pe=c.a.useState([]),je=Object(l.a)(pe,2),_e=je[0],he=je[1];function fe(){J(!0)}function be(){E(!1),s(!1),h(!1),Q(""),F(!1),re(!1),J(!1)}c.a.useEffect((function(){console.log("use effect getUserInfo"),x.getUserInfo().then((function(e){de(e)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",e)}))}),[]),c.a.useEffect((function(){console.log("use effect getCardList"),x.getCardList().then((function(e){he(e)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a",e)}))}),[]),c.a.useEffect((function(){function e(e){"Escape"===e.key&&be()}function t(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__button-cross"))&&be()}return document.addEventListener("keydown",e),document.addEventListener("click",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}));var me=Object(a.useState)(!1),ge=Object(l.a)(me,2),Oe=ge[0],xe=ge[1],ve=Object(u.g)(),Ce=Object(a.useState)(""),Ne=Object(l.a)(Ce,2),ke=Ne[0],ye=Ne[1],Se=Object(a.useState)(""),Le=Object(l.a)(Se,2),Ee=Le[0],we=Le[1],Ie=Object(a.useState)(""),Ue=Object(l.a)(Ie,2),De=Ue[0],Re=Ue[1];function Pe(e,t){we(e),Re(t)}return c.a.useEffect((function(){console.log("use effect checkToken"),fetch("".concat(P,"/users/me"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(T).then((function(e){if(!e||400===e.statusCode)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");if(401===e.statusCode)throw new Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");e&&(xe(!0),ye(e.email),ve.push("/main"))})).catch((function(){return ve.push("/signin")}))}),[ve,Oe]),Object(j.jsx)(d.Provider,{value:ue,children:Object(j.jsxs)("div",{className:"root",children:[Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)(_,{email:ke,headerLinkUrl:De,btnText:Ee,onClick:function(){localStorage.getItem("jwt")&&(localStorage.removeItem("jwt"),ye(""),xe(!1))}}),Object(j.jsx)("main",{className:"content",children:Object(j.jsxs)(u.d,{children:[Object(j.jsx)(I,{path:"/main",loggedIn:Oe,component:f,email:ke,onInit:Pe,onEditProfile:function(){s(!0)},onAddPlace:function(){h(!0)},onEditAvatar:function(){E(!0)},handleCardClick:function(e){Q(e)},cards:_e,onCardLike:function(e){var t=e.likes.some((function(e){return String(e)===String(ue._id)}));x.changeLikeCardStatus(e._id,!t).then((function(t){var n=_e.map((function(n){return n._id===e._id?t:n}));he(n)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",e)}))},checkCardDelete:function(e){Z(e)},onCardDeleteClick:function(e){re(!0),F(!0)}}),Object(j.jsx)(u.b,{path:"/signin",children:Object(j.jsx)(S,{onLogin:function(e){return function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(T)}(e.email,e.password).then((function(e){if(!e||400===e.statusCode)throw new Error("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");if(401===e.statusCode)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");e.user&&xe(!0)})).then((function(){ve.push("/")})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435",e)}))},onInit:Pe})}),Object(j.jsx)(u.b,{path:"/signup",children:Object(j.jsx)(L,{onRegister:function(e){return function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(T)}(e.email,e.password).then((function(e){if(!e||400===e.statusCode)throw new Error("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");ve.push("/signin")})).then((function(){ve.push("/signin"),H(!0),fe()})).catch((function(e){H(!1),fe(),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",e)}))},onInit:Pe})}),Object(j.jsx)(u.b,{exact:!0,path:"/",children:Oe?Object(j.jsx)(u.a,{to:"/main"}):Object(j.jsx)(u.a,{to:"signin"})})]})}),Object(j.jsx)(b,{})]}),Object(j.jsx)(C,{isOpen:n,onClose:be,onUpdateUser:function(e){ae(!0),x.setUserInfo(e).then((function(e){de(e),ae(!1),be()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",e)}))},isLoading:ne}),Object(j.jsx)(k,{isOpen:p,onClose:be,onAddPlace:function(e){ae(!0),x.addCard(e).then((function(e){he([e].concat(Object(o.a)(_e))),ae(!1),be()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",e)}))},isLoading:ne}),Object(j.jsx)(N,{isOpen:v,onClose:be,onUpdateAvatar:function(e){ae(!0),x.setUserAvatar(e.avatar).then((function(e){de(e),ae(!1),be()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",e)}))},isLoading:ne}),Object(j.jsx)(m,{card:K,onClose:be}),Object(j.jsx)(y,{isOpen:D,onClose:be,onDeleteCard:function(){ae(!0),x.deleteCard(Y).then((function(){var e=_e.filter((function(e){return e._id!==Y}));he(e),ae(!1),be()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",e)}))},isLoading:ne,isDeletingCard:ie}),Object(j.jsx)(R,{isOpen:M,onClose:be,isAuthSuccess:G})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(r.a,{children:Object(j.jsx)(F,{})})}),document.getElementById("root")),A()}},[[36,1,2]]]);
//# sourceMappingURL=main.5194223e.chunk.js.map