{"version":3,"sources":["contexts/CurrentUserContext.js","images/logo-white.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/regist-success.svg","images/regist-error.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","useState","isBurgerOpen","setIsBurgerOpen","className","src","logoImg","alt","onClick","email","to","headerLinkUrl","btnText","Card","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","isLikedAnyBody","length","cardDeleteButtonClassName","cardLikeButtonClassName","cardLikeQuantityClassName","type","e","checkCardDelete","target","id","onCardDeleteClick","style","backgroundImage","link","onCardClick","name","onCardLike","Main","useEffect","onInit","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","handleCardClick","Footer","ImagePopup","onClose","api","baseUrl","headers","this","_baseUrl","_headers","response","ok","json","Promise","reject","fetch","then","_handleOriginalResponse","user","method","body","JSON","stringify","data","isNotLiked","methodAPI","authorization","PopupWithForm","formRef","useRef","buttonText","isDeletingCard","isLoading","isOpen","title","action","classDescription","onSubmit","current","reset","ref","children","disabled","isFormValid","EditProfilePopup","setName","description","setDescription","errorTextNameInput","setErrorTextNameInput","errorTextAboutInput","setErrorTextAboutInput","setIsFormValid","inputNameRef","inputAboutRef","checkFormValid","validity","valid","evt","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","onChange","value","validationMessage","EditAvatarPopup","errorTextAvatarInput","setErrorTextAvatarInput","avatarLinkRef","onUpdateAvatar","AddPlacePopup","errorTextPlaceInput","setErrorTextPlaceInput","errorTextLinkInput","setErrorTextLinkInput","placeNameRef","placeLinkRef","DeleteCardPopup","onDeleteCard","Login","errorTextEmailInput","setErrorTextEmailInput","errorTextPasswordInput","setErrorTextPasswordInput","placeEmailRef","placePasswordRef","onLogin","password","Register","onRegister","ProtectedRoute","Component","component","loggedIn","InfoTooltip","isAuthSuccess","imgSuccess","imgError","resCheck","res","status","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setIsAuthSuccess","selectedCard","setSelectedCard","deletedCardId","setDeletedCardId","setIsLoading","setIsDeletingCard","setCurrentUser","setCards","handleInfoTooltipOpen","closeAllPopups","getUserInfo","userData","catch","err","console","log","getCardList","initialCards","handleEscClose","key","handleOverlayClose","classList","contains","document","addEventListener","removeEventListener","setLoggedIn","history","useHistory","setEmail","headerBtnText","setHeaderBtnText","setHeaderLinkUrl","handleAuthInit","btnLink","token","jwt","localStorage","getItem","statusCode","Error","push","Provider","removeItem","path","changeLikeCardStatus","newCard","newCards","c","cardId","auth","setItem","exact","setUserInfo","newUserData","addCard","avatarObj","setUserAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d198551d.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","export default __webpack_public_path__ + \"static/media/logo-white.ff5e7d02.svg\";","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logoImg from '../images/logo-white.svg';\r\n\r\nfunction Header(props) {\r\n\r\n  const [isBurgerOpen, setIsBurgerOpen] = React.useState(false);\r\n\r\n  function handleBtnClick() {\r\n    setIsBurgerOpen(!isBurgerOpen)\r\n  }\r\n\r\n  return (\r\n    <header className={isBurgerOpen ? \"header header_burger-opened\" : \"header\"}>\r\n      <div className=\"header__container\">\r\n        <img src={logoImg} alt=\"Лого\" className=\"logo header__logo\" />\r\n        <div className=\"header__btn\" onClick={handleBtnClick}>\r\n          <span className={isBurgerOpen ? 'header__burger header__burger_active' : 'header__burger' } />\r\n        </div>\r\n        <div className=\"header__info\">\r\n          <p className=\"header__info-email\">{props.email}</p>\r\n          <Link to={props.headerLinkUrl} className=\"header__info-link button\" onClick={props.onClick}>{props.btnText}</Link>\r\n        </div> \r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const isLikedAnyBody = props.card.likes.length !== 0;\r\n\r\n  const cardDeleteButtonClassName = (\r\n  `card__trash button ${isOwn ? 'card__trash_visible' : 'card__trash_hidden'}`\r\n); \r\n  const cardLikeButtonClassName = (\r\n  `card__like button ${isLiked ? 'card__like_active' : 'card__like_hidden'}`\r\n); \r\n  const cardLikeQuantityClassName = (\r\n    `card__like-quantity ${isLikedAnyBody ? 'card__like-quantity_visible' : 'card__like-quantity_hidden'}`\r\n  ); \r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick(){\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  function handleDeleteClick(e) {\r\n    props.checkCardDelete(e.target.id); \r\n    props.onCardDeleteClick();\r\n  }\r\n\r\n  return (\r\n    <article className=\"card\" >\r\n      <button type=\"button\" className={ cardDeleteButtonClassName } onClick={handleDeleteClick} id={props.id}></button>\r\n      <div className=\"card__img\" style={{ backgroundImage: `url(${props.card.link})` }} onClick={handleClick}></div>\r\n      <div className=\"card__row\">\r\n        <h3 className=\"card__title\">{props.card.name}</h3>\r\n        <div className=\"card__like-items\">\r\n          <button type=\"button\" className={ cardLikeButtonClassName } onClick={handleLikeClick}></button>\r\n          <p className={ cardLikeQuantityClassName }>{props.card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  React.useEffect(() => {\r\n    props.onInit('Выйти', '/signin')\r\n  }, [props]); \r\n  \r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\r\n          <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}></div>\r\n          <div className=\"profile__avatar-bg\"></div>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__info-row\">\r\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n            <button type=\"button\" className=\"profile__edit-button button\" onClick={props.onEditProfile}></button>\r\n          </div>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button button\" onClick={props.onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {props.cards.map((item) => (\r\n          <Card\r\n            key={item._id}\r\n            id={item._id}\r\n            card={item}\r\n            onCardClick={props.handleCardClick}\r\n            onCardLike={props.onCardLike}\r\n            checkCardDelete={props.checkCardDelete}\r\n            onCardDeleteClick={props.onCardDeleteClick}\r\n          />\r\n        ))}\r\n      </section>\r\n\r\n    </main >\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia Udmurtia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function ImagePopup(props) {\r\n  return (\r\n    <section className={`root__popup popup-image popup popup_theme_dark ${props.card ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup-image__container\">\r\n        <button type=\"button\" className=\"popup-image__button-cross popup__button-cross button\" onClick={props.onClose}></button>\r\n        <img src={`${props.card.link}`} alt=\"Картинка\" className=\"popup-image__img\"></img>\r\n        <h3 className=\"popup-image__title\">{props.card.name}</h3>\r\n      </div>\r\n    </section >\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleOriginalResponse(response) {\r\n    if (!response.ok) {\r\n      return Promise.reject(`Error: ${response}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  getCardList() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  setUserInfo(user) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: user.name,\r\n        about: user.about,\r\n      }),\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  addCard(data) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      }),\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(id, isNotLiked){\r\n    let methodAPI = \"DELETE\";\r\n    if (isNotLiked) {\r\n      methodAPI = 'PUT';\r\n    }\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: methodAPI,\r\n      headers: this._headers,\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  setUserAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: link,\r\n      }),\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-19\",\r\n  headers: {\r\n    authorization: \"528df5a2-16f1-4f0e-9003-28f33571e107\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  const formRef = React.useRef();\r\n\r\n  function handlerSubmitForm(e) {\r\n    props.onSubmit(e);\r\n    formRef.current.reset();\r\n  }\r\n\r\n  let buttonText = '';\r\n  if(props.isDeletingCard) {\r\n    if (props.isLoading) {\r\n      buttonText = 'Да...'\r\n    } else {\r\n      buttonText = 'Да'\r\n    }\r\n  } else {\r\n    if (props.isLoading) {\r\n      buttonText = 'Сохранить...'\r\n    } else {\r\n      buttonText = 'Сохранить'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className={`popup root__popup ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <div className={`popup__container`}>\r\n        <button type=\"button\" className={`popup__button-cross button`} onClick={props.onClose}></button>\r\n        <h3 className={`popup__title`}>{props.title}</h3>\r\n        <form action=\"#\" name={`popup${props.classDescription}Form`} className={`popup__form`} onSubmit={handlerSubmitForm} ref={formRef}>\r\n          {props.children}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!props.isFormValid}\r\n            className={`${props.isFormValid\r\n              ? `popup__btn-add`\r\n              : `popup__btn-add popup__btn-add_invalid`}`}>{buttonText}</button>\r\n        </form>\r\n      </div>\r\n    </section >\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const [errorTextNameInput, setErrorTextNameInput] = React.useState('');\r\n  const [errorTextAboutInput, setErrorTextAboutInput] = React.useState('');\r\n  const [isFormValid, setIsFormValid] = React.useState(true);\r\n\r\n  const inputNameRef = React.useRef();\r\n  const inputAboutRef = React.useRef();\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name || '');\r\n    setDescription(currentUser.about || '');\r\n    setErrorTextAboutInput('');\r\n    setErrorTextNameInput('');\r\n    checkFormValid();\r\n  }, [currentUser, props.isOpen]); \r\n\r\n  function checkFormValid() {\r\n    if (inputNameRef.current.validity.valid && inputAboutRef.current.validity.valid) {\r\n      setIsFormValid(true);\r\n    } else {\r\n      setIsFormValid(false);\r\n    }\r\n  }\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n    setErrorTextNameInput(inputNameRef.current.validationMessage);\r\n    checkFormValid();\r\n  }\r\n  \r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value)\r\n    setErrorTextAboutInput(inputAboutRef.current.validationMessage);\r\n    checkFormValid();\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title='Редактировать профиль'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n      isFormValid={isFormValid}\r\n      children={\r\n        <>\r\n          <input type=\"text\" name=\"popupInputName\" placeholder=\"Введите Ваше имя\"\r\n            className=\"popup-profile__text popup__text popup-profile__text_type_name popup__input\" id=\"profile-name\" required\r\n            minLength=\"2\" maxLength=\"40\" onChange={handleNameChange} ref={inputNameRef}\r\n            value={name}\r\n          />\r\n          <span id=\"$profile-name-error\" className=\"popup__text-error\">{errorTextNameInput}</span>\r\n          <input type=\"text\" name=\"popupInputJob\" placeholder=\"Введите Вашу профессию\"\r\n            className=\"popup-profile__text popup__text popup-profile__text_type_profession popup__input\" id=\"profile-job\"\r\n            required minLength=\"2\" maxLength=\"200\" onChange={handleDescriptionChange}  ref={inputAboutRef}\r\n            value={description}\r\n          />\r\n          <span id=\"profile-job-error\" className=\"popup__text-error\">{errorTextAboutInput}</span>\r\n        </>\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [errorTextAvatarInput, setErrorTextAvatarInput] = React.useState('');\r\n  const [isFormValid, setIsFormValid] = React.useState(true);\r\n  \r\n  const avatarLinkRef = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    avatarLinkRef.current.value = currentUser.avatar || '';\r\n    setErrorTextAvatarInput('');\r\n    checkFormValid();\r\n  }, [currentUser, props.isOpen]); \r\n\r\n  function checkFormValid() {\r\n    if (avatarLinkRef.current.validity.valid) {\r\n      setIsFormValid(true);\r\n    } else {\r\n      setIsFormValid(false);\r\n    }\r\n  }\r\n\r\n  function handleLinkChange() {\r\n    setErrorTextAvatarInput(avatarLinkRef.current.validationMessage);\r\n    checkFormValid();\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarLinkRef.current.value,\r\n  });\r\n} \r\n  \r\n  return (\r\n    <PopupWithForm\r\n      title='Обновить аватар'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n      isFormValid={isFormValid}\r\n      children={\r\n        <>\r\n          <input type=\"url\" name=\"avatarInputLink\" placeholder=\"Ссылка на картинку\"\r\n            className=\"popup-avatar__text popup__text popup-avatar__text_type_link popup__input\" id=\"avatar-link\" required\r\n            onChange={handleLinkChange} ref={avatarLinkRef}\r\n          />\r\n          <span id=\"avatar-link-error\" className=\"popup__text-error\">{errorTextAvatarInput}</span>\r\n        </>\r\n      } \r\n    />\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n  ","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const [errorTextPlaceInput, setErrorTextPlaceInput] = React.useState('');\r\n  const [errorTextLinkInput, setErrorTextLinkInput] = React.useState('');\r\n  const [isFormValid, setIsFormValid] = React.useState(false);\r\n\r\n  const placeNameRef = React.useRef();\r\n  const placeLinkRef = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    placeNameRef.current.value = '';\r\n    placeLinkRef.current.value = '';\r\n    setErrorTextPlaceInput('');\r\n    setErrorTextLinkInput('');\r\n    checkFormValid();\r\n  }, [props.isOpen]); \r\n\r\n  function checkFormValid() {\r\n    if (placeNameRef.current.validity.valid && placeLinkRef.current.validity.valid) {\r\n      setIsFormValid(true);\r\n    } else {\r\n      setIsFormValid(false);\r\n    }\r\n  }\r\n\r\n  function handlePlaceNameChange() {\r\n    setErrorTextPlaceInput(placeNameRef.current.validationMessage);\r\n    checkFormValid();\r\n  }\r\n  function handlePlaceLinkChange() {\r\n    setErrorTextLinkInput(placeLinkRef.current.validationMessage);\r\n    checkFormValid();\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: placeNameRef.current.value,\r\n      link: placeLinkRef.current.value,\r\n    });\r\n  }\r\n  \r\n  return (\r\n    <PopupWithForm\r\n      title='Новое место'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n      isFormValid={isFormValid}\r\n      children={\r\n        <>\r\n          <input type=\"text\" name=\"popupInputPlace\" placeholder=\"Название\"\r\n            className=\"popup-card__text popup__text popup-card__text_type_place popup__input\" id=\"card-place\" required\r\n            minLength=\"2\" maxLength=\"30\"\r\n            onChange={handlePlaceNameChange} ref={placeNameRef}\r\n          />\r\n          <span id=\"card-place-error\" className=\"popup__text-error\">{errorTextPlaceInput}</span>\r\n          <input type=\"url\" name=\"popupInputLink\" placeholder=\"Ссылка на картинку\"\r\n            className=\"popup-card__text popup__text popup-card__text_type_link popup__input\" id=\"card-link\" required\r\n            onChange={handlePlaceLinkChange} ref={placeLinkRef}\r\n          />\r\n          <span id=\"card-link-error\" className=\"popup__text-error\">{errorTextLinkInput}</span>\r\n        </>\r\n      }\r\n    />\r\n  )\r\n  \r\n}\r\n\r\nexport default AddPlacePopup;\r\n  ","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeleteCardPopup(props) {\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onDeleteCard()\r\n} \r\n  \r\n  return (\r\n    <PopupWithForm\r\n      title='Вы уверены?'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isLoading={props.isLoading}\r\n      isDeletingCard={props.isDeletingCard}\r\n      isFormValid={true}\r\n      children={\r\n        <></>\r\n      } \r\n    />\r\n  )\r\n}\r\n\r\nexport default DeleteCardPopup;\r\n  ","import React from 'react';\r\n\r\nexport default function Login(props) {\r\n\r\n  React.useEffect(() => {\r\n    props.onInit('Регистрация', '/signup')\r\n  }, [props]); \r\n\r\n  const [errorTextEmailInput, setErrorTextEmailInput] = React.useState('');\r\n  const [errorTextPasswordInput, setErrorTextPasswordInput] = React.useState('');\r\n\r\n  const placeEmailRef = React.useRef();\r\n  const placePasswordRef = React.useRef();\r\n\r\n  function handleEmailChange() {\r\n    setErrorTextEmailInput(placeEmailRef.current.validationMessage)\r\n  } \r\n\r\n  function handlePasswordChange() {\r\n    setErrorTextPasswordInput(placePasswordRef.current.validationMessage)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!placeEmailRef.current.value || !placePasswordRef.current.value) {\r\n      return;\r\n    }\r\n    props.onLogin({ email: placeEmailRef.current.value, password: placePasswordRef.current.value })\r\n  }\r\n\r\n  return (\r\n    <div className=\"login form-page\">\r\n      <div className=\"form-page__container\">\r\n        <h3 className=\"login__title form-page__title\">Вход</h3>\r\n        <form action=\"#\" name=\"loginForm\" className=\"login__form form-page__form\" onSubmit={handleSubmit}>\r\n          <input type=\"email\" name=\"loginInputEmail\" placeholder=\"Email\"\r\n            className=\"login__form-input form-page__input\" id=\"login-email\" required\r\n            onChange={handleEmailChange} ref={placeEmailRef}\r\n          />\r\n          <span id=\"login-email-error\" className=\"form-page__text-error\">{errorTextEmailInput}</span>\r\n          <input type=\"password\" name=\"loginInputPassword\" placeholder=\"Пароль\"\r\n            className=\"login__form-input form-page__input\" id=\"login-password\" required\r\n            onChange={handlePasswordChange} ref={placePasswordRef}\r\n          />\r\n          <span id=\"login-password-error\" className=\"form-page__text-error\">{errorTextPasswordInput}</span>\r\n          <button type=\"submit\" className=\"login__form-btn form-page__btn\">Войти</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Register(props) {\r\n  \r\n  React.useEffect(() => {\r\n    props.onInit('Войти', '/signin')\r\n  }, [props]);\r\n\r\n  const [errorTextEmailInput, setErrorTextEmailInput] = React.useState('');\r\n  const [errorTextPasswordInput, setErrorTextPasswordInput] = React.useState('');\r\n\r\n  const placeEmailRef = React.useRef();\r\n  const placePasswordRef = React.useRef();\r\n\r\n  function handleEmailChange() {\r\n    setErrorTextEmailInput(placeEmailRef.current.validationMessage)\r\n  } \r\n\r\n  function handlePasswordChange() {\r\n    setErrorTextPasswordInput(placePasswordRef.current.validationMessage)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!placeEmailRef.current.value || !placePasswordRef.current.value) {\r\n      return;\r\n    }\r\n    props.onRegister({ email: placeEmailRef.current.value, password: placePasswordRef.current.value })\r\n  }\r\n\r\n  return (\r\n    <div className=\"regist form-page\">\r\n      <div className=\"form-page__container\">\r\n        <h3 className=\"regist__title form-page__title\">Регистрация</h3>\r\n        <form action=\"#\" name=\"registForm\" className=\"regist__form form-page__form\" onSubmit={handleSubmit}>\r\n          <input type=\"email\" name=\"registInputEmail\" placeholder=\"Email\"\r\n            className=\"regist__form-input form-page__input\" id=\"regist-email\" required\r\n            onChange={handleEmailChange} ref={placeEmailRef}\r\n          />\r\n          <span id=\"regist-email-error\" className=\"form-page__text-error\">{errorTextEmailInput}</span>\r\n          <input type=\"password\" name=\"registInputPassword\" placeholder=\"Пароль\"\r\n            className=\"regist__form-input form-page__input\" id=\"regist-password\" required\r\n            onChange={handlePasswordChange} ref={placePasswordRef}\r\n          />\r\n          <span id=\"regist-password-error\" className=\"form-page__text-error\">{errorTextPasswordInput}</span>\r\n          <button type=\"submit\" className=\"regist__form-btn form-page__btn\">Зарегистрироваться</button>\r\n          <Link to=\"/signin\" className=\"button form-page__btn-enter\">Уже зарегистрированы? Войти</Link>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/regist-success.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/regist-error.d4ce2a26.svg\";","import React from 'react';\r\nimport imgSuccess from '../images/regist-success.svg';\r\nimport imgError from '../images/regist-error.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n  \r\n  return (\r\n    <section className={`popup root__popup ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <div className={`popup__container`}>\r\n        <button type=\"button\" className={`popup__button-cross button`} onClick={props.onClose}></button>\r\n        <img src={props.isAuthSuccess ? imgSuccess : imgError} alt={props.isAuthSuccess ? 'Успешно' : 'Ошибка'} className=\"popup__img\" />\r\n        <h3 className={`popup__title popup__title_cener`}>{props.isAuthSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h3>\r\n      </div>\r\n    </section >\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","const baseUrl = \"https://auth.nomoreparties.co\";\r\n\r\nconst resCheck = (res) => res.ok ? res.json() : Promise.reject(`Ошибка ${res.status}`);\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${baseUrl}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then(resCheck)\r\n}\r\n\r\nexport const login = (email, password) => {\r\n  return fetch(`${baseUrl}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n    .then(resCheck)\r\n}\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(resCheck)\r\n}","import React, { useState } from 'react';\r\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeleteCardPopup from './DeleteCardPopup';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as auth from '../utils/auth';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\r\n  const [isAuthSuccess, setIsAuthSuccess] = React.useState(true);\r\n\r\n  const [selectedCard, setSelectedCard] = React.useState('');\r\n  const [deletedCardId, setDeletedCardId] = React.useState('');\r\n\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [isDeletingCard, setIsDeletingCard] = React.useState(false);\r\n\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    api.getUserInfo()\r\n      .then((userData) => {\r\n      setCurrentUser(userData); \r\n    })\r\n    .catch((err) => console.log(\"Ошибка при загрузке данных\", err));\r\n  }, [])\r\n\r\n\r\n  // popaps opening and closing\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleDeleteCardClick(card) {\r\n    setIsDeletingCard(true);\r\n    setIsDeleteCardPopupOpen(true);\r\n  }\r\n\r\n  function handleInfoTooltipOpen() {\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  function handleIsAuthSuccess() {\r\n    setIsAuthSuccess(true);\r\n  }\r\n\r\n  function handleIsAuthError() {\r\n    setIsAuthSuccess(false);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setSelectedCard('');\r\n    setIsDeleteCardPopupOpen(false);\r\n    setIsDeletingCard(false);\r\n    setIsInfoTooltipOpen(false);\r\n  }\r\n\r\n  // profile\r\n  function handleUpdateUser(userData) {\r\n    setIsLoading(true)\r\n    api.setUserInfo(userData)\r\n      .then((newUserData) => {\r\n        setCurrentUser(newUserData);\r\n        setIsLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при загрузке данных\", err));\r\n  }\r\n\r\n  // avatar\r\n  function handleUpdateAvatar(avatarObj) {\r\n    setIsLoading(true)\r\n    api.setUserAvatar(avatarObj.avatar)\r\n      .then((userData) => {\r\n        setCurrentUser(userData); \r\n        setIsLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при загрузке данных аватара\", err));\r\n  }\r\n\r\n  // cards\r\n  React.useEffect(() => {\r\n    api.getCardList()\r\n      .then((initialCards) => {\r\n        setCards(initialCards);\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при загрузке данных карточек\", err));\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n        // setCards((state) => state.map((c) => c._id === card._id ? newCard : c);\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при загрузке данных\", err));\r\n  } \r\n\r\n  function checkDeletedCardId(cardId) {\r\n    setDeletedCardId(cardId);\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    setIsLoading(true);\r\n    api.deleteCard(deletedCardId)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== deletedCardId);\r\n        setCards(newCards); \r\n        setIsLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при удалении карточки\", err));\r\n  }\r\n\r\n  // card\r\n  function handleAddPlaceSubmit(card) {\r\n    setIsLoading(true)\r\n    api.addCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]); \r\n        setIsLoading(false);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при добавлении карточки\", err));\r\n  }\r\n\r\n  // закрытие по Esc и оверлею\r\n  React.useEffect(() => {\r\n    function handleEscClose(evt) {\r\n      if (evt.key === \"Escape\") {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    function handleOverlayClose(evt) {\r\n       if (\r\n        evt.target.classList.contains(\"popup\") ||\r\n        evt.target.classList.contains(\"popup__button-cross\")\r\n      ) {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n    document.addEventListener(\"keydown\", handleEscClose);\r\n    document.addEventListener(\"click\", handleOverlayClose);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscClose);\r\n      document.removeEventListener(\"click\", handleOverlayClose);\r\n    }\r\n  })\r\n\r\n  // registration and authorization\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [headerBtnText, setHeaderBtnText] = useState('');\r\n  const [headerLinkUrl, setHeaderLinkUrl] = useState('');\r\n\r\n  function handleAuthInit(btnText, btnLink) {   \r\n    setHeaderBtnText(btnText);\r\n    setHeaderLinkUrl(btnLink);\r\n  }\r\n\r\n  function handleRegister({email, password}) {\r\n    return auth.register(email, password)\r\n      .then(res => {\r\n        if (!res || res.statusCode === 400) {\r\n          throw new Error('Некорректно заполнено одно из полей')\r\n        } else {\r\n          history.push('/signin');\r\n         }\r\n      })\r\n      .then(() => {\r\n        history.push('/signin');\r\n        handleIsAuthSuccess();\r\n        handleInfoTooltipOpen(); \r\n      })\r\n      .catch(err => { \r\n        handleIsAuthError();\r\n        handleInfoTooltipOpen();\r\n        console.log(\"Ошибка при регистрации\", err)\r\n      })\r\n  }\r\n\r\n  function handleLogin({email, password}) {\r\n    return auth.login(email, password)\r\n      .then(res => {\r\n        if (!res || res.statusCode === 400) {\r\n          throw new Error('Не передано одно из полей')\r\n        } else if (res.statusCode === 401) {\r\n          throw new Error('Пользователь с email не найден')\r\n        }\r\n        if (res.token) {\r\n          setLoggedIn(true);\r\n          localStorage.setItem('jwt', res.token);\r\n         }\r\n      })\r\n      .then(() => {\r\n        history.push('/')\r\n      })\r\n      .catch((err) => console.log(\"Ошибка при входе\", err));\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const jwt = localStorage.getItem('jwt'); \r\n    if (jwt) {\r\n      auth.checkToken(jwt)\r\n        .then((res) => {\r\n          if (!res || res.statusCode === 400) {\r\n            throw new Error('Токен не передан или передан не в том формате')\r\n          } else if (res.statusCode === 401) {\r\n            throw new Error('Переданный токен некорректен')\r\n          }\r\n          if (res) {\r\n            setLoggedIn(true); \r\n            setEmail(res.data.email);\r\n            history.push('/main');\r\n          }\r\n        })\r\n        .catch(() => history.push('/signin'));\r\n    }\r\n  }, [history, loggedIn]); \r\n\r\n  function handleSignOut() {\r\n    if (localStorage.getItem('jwt')) {\r\n      localStorage.removeItem('jwt');\r\n      setEmail('')\r\n      setLoggedIn(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"root\">\r\n\r\n        <div className=\"page\">\r\n          <Header\r\n            email={email}\r\n            headerLinkUrl={headerLinkUrl}\r\n            btnText={headerBtnText}\r\n            onClick={handleSignOut}\r\n          />\r\n          \r\n          <main className=\"content\">\r\n            <Switch>\r\n              <ProtectedRoute\r\n                path='/main'\r\n                loggedIn={loggedIn}\r\n                component={Main}\r\n                email={email}\r\n                onInit={handleAuthInit}\r\n                onEditProfile={handleEditProfileClick}\r\n                onAddPlace={handleAddPlaceClick}\r\n                onEditAvatar={handleEditAvatarClick}\r\n                handleCardClick={handleCardClick}\r\n                cards={cards}\r\n                onCardLike={handleCardLike} \r\n                checkCardDelete={checkDeletedCardId}\r\n                onCardDeleteClick={handleDeleteCardClick}\r\n              />\r\n              <Route path=\"/signin\">\r\n                <Login\r\n                  onLogin={handleLogin}\r\n                  onInit={handleAuthInit}\r\n                />\r\n              </Route>\r\n              <Route path=\"/signup\">\r\n                <Register\r\n                  onRegister={handleRegister}\r\n                  onInit={handleAuthInit}\r\n                />\r\n              </Route>\r\n              <Route exact path=\"/\">\r\n                {loggedIn ? <Redirect to='/main'/> : <Redirect to='signin'/>}\r\n              </Route>\r\n            </Switch>\r\n          </main> \r\n          <Footer />\r\n        </div>\r\n        \r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          isLoading={isLoading}\r\n        /> \r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          isLoading={isLoading}\r\n        />\r\n\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          isLoading={isLoading}\r\n        />\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n        />\r\n\r\n        <DeleteCardPopup\r\n        isOpen={isDeleteCardPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onDeleteCard={handleCardDelete}\r\n        isLoading={isLoading}\r\n        isDeletingCard={isDeletingCard}\r\n        />\r\n\r\n        <InfoTooltip\r\n        isOpen={isInfoTooltipOpen}\r\n        onClose={closeAllPopups}\r\n        isAuthSuccess={isAuthSuccess}\r\n        />  \r\n      </div >\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}